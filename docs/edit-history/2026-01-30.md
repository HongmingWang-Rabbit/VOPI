# Edit History - January 30, 2026

## Session Summary

Added **Shopify mandatory compliance webhooks** (GDPR). Three new POST endpoints for `customers/data_request`, `customers/redact`, and `shop/redact` — all verified via HMAC-SHA256 signature using the Shopify API secret. Since VOPI doesn't store customer data, all three acknowledge and return 200.

### Changes

1. **`src/services/oauth/shopify-oauth.service.ts`** — Added `verifyWebhookHmac(rawBody, hmacHeader)` method using HMAC-SHA256 base64 with timing-safe comparison
2. **`src/routes/webhooks.routes.ts`** — New file with 3 Shopify compliance webhook endpoints, shared handler factory, body schema for Swagger docs, and proper error logging for misconfigured Shopify credentials
3. **`src/middleware/auth.middleware.ts`** — Added `/api/v1/webhooks/shopify/` to `AUTH_SKIP_PATHS` (webhooks authenticated via HMAC, not API key)
4. **`src/app.ts`** — Registered `webhooksRoutes` with `/api/v1` prefix
